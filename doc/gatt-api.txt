BlueZ D-Bus GATT API description
********************************


Service hierarchy
=================

GATT Client and Server service representation. Object path for server are
freely definable.

Server Services already implemented by the core should NOT be re-declared
as external GATT service.

Service		org.bluez
Interface	org.bluez.gatt.Service1
Object path	[variable prefix]/{hci0,hci1,...}/dev_XX_XX_XX_XX_XX_XX/serviceXX

Properties	string UUID [read-only]

		array{object} Includes [read-only]

Characteristic hierarchy
========================

GATT clients and servers share the same high-level D-Bus API. Some properties
are applied to server implementations only, especially the properties related
to security.

For servers, the object paths need to follow the service path hierarchy and
freely defineable.

Service		org.bluez
Interface	org.bluez.gatt.Characteristic1
Object path	[variable prefix]/{hci0,hci1,...}/dev_XX_XX_XX_XX_XX_XX/serviceXX/charYYYY


Methods		array{byte} ReadValue(uint16 offset)

			This method reads the characteristic value attribute from the
			given characteristic.

			Possible errors: org.bluez.Error.NotConnected
					 org.bluez.Error.Failed

		void WriteValue(uint16 offset, array{byte} buf)

			This method writes the characteristic value attribute from the
			given characteristic.

			Possible errors: org.bluez.Error.NotConnected
					 org.bluez.Error.Failed


Properties	string UUID [read-only]

		array{byte} Value [read-write, optional]

			Value of the characteristic, if present, the value will be cached
			by bluetoothd and updated when the PropertyChanged is emitted.

		string ReadSecurity [read-only, optional]

			Defines the minimum security level requirement to
			read this characteristic. Applied to GATT server
			implementations only. Default value is "low".
			Possible values:
				"low": No Encryption, No Authentication
				"medium": Encryption, No Authentication
				"high": Encryption, Authentication

		string WriteSecurity [read-only, optional]

			Defines the minimum security level requirement to
			write this characteristic. Applied to GATT sever
			implementations only. Default value is "low".
			Possible values:
				"low": No Encryption, No Authentication
				"medium": Encryption, No Authentication
				"high": Encryption, Authentication

		byte KeySize [read-only, optional]

			Defines the minimum encryption key size when ReadSecurity
			and/or WriteSecurity are set to "medium" or "high".

		byte Properties [read-only, optional]

			Bit field which determines how the Characteristic Value
			can be used. See Core spec page 1809, "Table 3.5:
			Characteristic Properties bit field"

		array{dict} Descriptors [read-write, optional]

		{
			"uuid": string [mandatory]
			"value": array{byte} [mandatory]
			"permissions": byte [optional]
		}
		{
			...
		}

ServiceManager hierarchy
========================

ServiceManager allows external applications to register GATT based services.
Services should follow the API for Service and Characteristic described above.

For GATT servers, services and characteristics are fetched automatically by
BlueZ using D-Bus Object Manager. BlueZ core is responsible for managing
ATT requests translating to D-Bus messages and signals to interact with the
external GATT server.

Service		org.bluez
Interface	org.bluez.gatt.ServiceManager1
Object path	/

Methods		RegisterServices(array{object} services)

			Registers a list of primary services, all the characteristics
			under it and all the secondary services included by it (using
			the D-Bus ObjectManager)

		UnregisterAllServices()
